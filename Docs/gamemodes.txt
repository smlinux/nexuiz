========================
=   Game Mode Patch    =
=By Dan Hale, aka Wazat=
========================

PLEASE NOTE THAT SINCE THE INTEGRATION OF 'GAME MODE PATCH' THE MAP AND MENU SYSTEM WAS REWRITTEN AND THUS THE INFO REGARDING BOTH IS OUTDATED!

This patch enables game modes like Capture the Flag and Domination, and adds more controls for all game modes.

See Cvars.txt and mapping.txt in /data/ for more info.


================
=Starting a map=
================

You can select a map from the menu and even build a maplist with it as normal.  To get the menu to list more maps, see the Adding Maps section.

To change maps from the console or a dedicated server, you usually won't use "map" or "changelevel" anymore.  Instead use "exec maps/<filename>.mapcfg".  For example, to play domination on nexdm10, type "exec maps/dom_nexdm10.mapcfg".  This is the preferred method, though you can use "map" and "changelevel" if you need to.

Note for dedicated servers:
Please look over cvars.txt and find out how to enable team balancing and other helpful features, as they won't take effect automatically in a dedicated server.  Your maplist should also list the mapcfg files (dm_nexdm03 rune_nexdm08 etc) instead of the .bsp files (nexdm03).
Also remember that you can edit the .mapcfg files in the pk3 to change fraglimits, timelimits, and other features.  If players begin complaining that maps don't last long enough you should probably do this (or set the frag overrides like g_domination_point_limit).  You can find out more about those in mapping.txt


============
=Game Modes=
============

Classic Deathmatch
Team Deathmatch (TDM)
Domination
Capture the Flag
Runematch


Classic Deathmatch
------------------

Nothing's changed here.  It's the standard frag fest we all know and love.


Team Deathmatch (TDM)
---------------------

TDM places players on different teams, making them win or lose together.  There are some new options for this mode including balancing teams.


Domination
----------

Frags are not the focus.  Instead players must capture control points placed throughout the level.  You capture a control point by touching it, and it will change to your team's insignia.  The longer you control points and the more you have, the more your team will score.  On some levels there may be some control points that award more points than others, so be sure to prioritize!


Capture The Flag
----------------

In CTF the main goal is to steal the enemy flag and take it back to your base to capture it.  You must have your flag back at base to capture, and you must touch it while carrying the enemy flag.  That said, you must also guard your flag from being stolen by the enemy team, or you will not be able to capture their flag, and they might capture yours.


Rune Match
----------

Players must find runes scattered throughout the level.  The longer you hold a rune, the more points you'll get.  Runes also imbue their holder with special powers, such as increased defense or speed.  However, every rune also has a curse attached to it, which has the opposite effect of a rune.  So you may have increased attack but lowered defense!
Runes pair up with curses randomly, and recombine into new pairs when their holder dies and drops them.

There are 5 runes and just as many curses.  Each rune has its own color, and its opposing curse is the same color but a different shape.  Below I've listed each of the runes and their opposing curses.

Rune: Strength (RED)
Increases attack power
Curse: Weakness
Decreases attack power

Rune: Defense (BLUE)
Increases defense
Curse: Vulnerability
Decreases defense

Rune: Vitality (GREEN)
Increases maximum HP and health regeneration rate
Curse: Venom
Decreases maximum HP and increases health degeneration rate

Rune: Speed (YELLOW)
Increases movement and attack speed
Curse: Slow
Decreases movement and attack speed

Rune: Vampire (PURPLE)
Gain health when you attack other players
Curse: Empathy
Lose health when you attack other players


Rune Match is usually played as a free for all, so you generally won't have a team to help you.


===========
Adding Maps
===========

This mod changes how maps are handled by the menu, so in order for a new map to be listed you need to add a .mapcfg file for it at the bare minimum (or hope the map's author has made one for you).  You can view existing mapcfgs in the maps folder, but here's a simple example of "dm_nexdm01.mapcfg":

set fraglimit 20
set timelimit 15
changelevel nexdm01


In truth, the *only* thing a mapcfg needs is the changelevel command, but usually you'll also want to set the game mode and default fraglimit and timelimit.

Mapcfgs are discussed in greater detail in mapping.txt


==============
Grappling Hook
==============

Servers can now enable the grappling hook with "g_grapppling_hook" set to 1.  Bind a key to "+hook" to use it.  For example:
bind f "+hook"


============
Menu Options
============

There are also new options available for these game modes:

------------
Common & TDM
------------

Join Message Display Time
How long to display the join message to tell players what game mode is being played and what team they are on.

Auto-Balance Teams
When players join, automatically assign them to the smallest team to keep things balanced (they can still change teams, however)

Force Balanced Teams
Players cannot switch to larger teams, and the game moves players around to make sure each team is more or less even in player numbers.  Players can switch to smaller or equally-sized teams, however.

Prevent Team Imbalance
If a player tries to change teams, he must join a team of lesser size or else he will be forced back to his old team, unless there are bots in that team he can trade with.

Changing team not allowed
Players cannot switch teams by themselves at all.  It is recommended you combine this with Force Balanced Teams, so that the game will move players around automatically if players leave and unbalance the teams.

Team Deathmatch # of teams
The number of teams in Team Deathmatch (2 - 4).

Score Transfer % on Change Team
When players choose to change teams, this is the percent of their score they get to keep (0 - 100).

Friendly Fire
If a team game is being played, this controls whether allies can hurt themselves or each other

Force Teamplay
Play a team game even if only normal deathmatch is selected


----------
Domination
----------

Point Limit
(Overrides map settings) How many points a team needs to win the game

No Scores From Kills
Players don't get points from kills, only from controlling domination points.  They do however still lose points if they kill themselves or a teammate.

Domination Score Amount
(Overrides map settings) How many points a domination point gives to the team that owns it each time it pings.

Score Frequency
(Overrides map settings) How often each domination point pings out points for its teammates.

DomPoint Capture Delay
How long after being touched it takes for a Domination Point to be captured.

Default # of teams
If playing on a normal DM map or non-Domination map, this is how many teams will be available to join.

----------------
Capture the Flag
----------------

Point Limit
(Overrides map settings) How many points a team must score to win

Return Time
How long flag takes to return when dropped

Capture Points (player)
How many points to give to the player who captured the flag in addition to what the whole team gets

Capture Points (team)
How many points the whole team gets when they capture the flag

Pickup Points
You get this many points simply for picking up the enemy flag

Return Points
Points you recieve when you return your flag to base

Rogue Team Return Points
Points a rogue team gets when returning the flag


----------
Rune Match
----------

Point Limit
How many points a player needs to win a match

Point Rate
How often each player carrying runes will score points

Point Amount
How many points player gets per rune he's carrying

Shuffle Time
How often runes change position when not picked up

Respawn Time
How quickly runes respawn after being dropped

Rune Settings
There are settings for each rune to modify its effects on the player when carries.
Most of these are ratios, meaning 0.5 is 50% and 1.2 is 120%.


=========
=Credits=
=========

My name's Dan Hale, aka Wazat.  I'm responsible for writing the code and making the changes to the menu.  I also added lots of features like team balancing, which weren't there before.

Black helped me with lots of menu stuff, and fixed it when I made a mess of things.  He got the map filter working, too.  Thanks, Black!

Thanks to Kaz for pushing me to do this and giving feedback & suggestions.  It turned out great because of him.

"Lardarse" Gregory R. Payne came up with the initial idea of Rune Match and helped me define it further from there.  In fact, probably most or all of the idea is his, and I take credit for coding it.

Uber special thanks to Black for his awesome idea on how to do maplists and game mode selection by map.

Special thanks to Randy, who provided the awesome team symbols for Domination & CTF.

Thanks to people who beta tested, found bugs, and/or made suggestions:
Kaz, Lardarse, esteel (who helped me weed out the dedicated server bugs)
Probably others I've forgotten  :(





=======
Changes
=======

Version 1.1
-----------

Dom points and CTF flags are now properly animated.
Fixed the grappling hook so it can be refired right after being released
Fixed the obnoxious "landing on floor" sound when using the hook
You should no longer take damage from using the grappling hook
Grappling hook flight and pull speed can now be set in the menu or by cvars
Fixed the management menu crashing when trying to save the Game settings (actually Black fixed it).
Black fixed the Map Filter too, so that it should properly change the currently selected map, and work in the maplist menu.

